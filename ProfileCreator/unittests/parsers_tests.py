import unittest
import datetime
from ProfileCreator.helpers.file_helper import clear_dir
from ProfileCreator.parsers.sensors_parser import SensorParser
from ProfileCreator.common.sensor_reading import SensorReading
from typing import List, Tuple

class SensorParserTests(unittest.TestCase):

    def setUp(self):
        self._files_test_data = [
            "data/good_sensor_data_1.bin",
            "data/good_sensor_data_2.bin"
            #"data/good_sensor_data_3.bin"
        ]
        readings_1 = [
				SensorReading(417792863166, [8.388472029229785, 14.299050752758205, 4.598375237256089], [142.26167763224862, 454.54841925535123, 421.96658434793477], [31.752789536232807, 75.39040874062081, 35.4356663131105], [18.889988132866282, 25.412922305101326, 24.681563874906576], [15.866433725776606, 11.879699549830843, 3.8037821421431026], [3.4212503395696983, 0.3004989839414307, 2.4259775551899274]),
				SensorReading(417792863354, [20.814563577632534, 24.6561319013012, 16.258537531877757], [403.36958393704316, 285.8156891127988, 237.052574054472], [50.68676924740735, 67.10741566535991, 46.02544908383896], [31.49951215702095, 31.854321257867355, 11.64450259642923], [26.18651726538747, 8.768958036148057, 8.603026473801666], [0.9097534916216321, 1.3508144688289125, 3.270939484102433]),
				SensorReading(417792863555, [10.960081703379334, 3.4424184017617208, 20.176516481535916], [339.0839846743221, 263.00653068473036, 325.4847594669969], [5.030167679015896, 36.51122574691259, 88.5231720509015], [19.666813370152898, 11.308182184663305, 21.938292778494354], [3.8260506943307178, 22.32086276697542, 25.341778250431947], [8.905655092199101, 2.338257987067517, 3.0467060128928045]),
				SensorReading(417792863687, [12.021101548308181, 16.608672894328155, 29.43592294048711], [207.61110301073603, 13.073221472273577, 305.83697006586374], [99.64643771668806, 42.26947257191404, 20.189875602711847], [8.349594099097327, 4.667407179207231, 31.217564912889824], [24.644054342715926, 4.65192400019583, 31.67697358610207], [2.176971874868754, 0.7744342753282285, 3.095802986097136]),
				SensorReading(417792863897, [21.801133125693298, 17.238645070437915, 11.081729966370759], [282.44601130160726, 172.9370374720426, 134.7803231255218], [11.02401996525143, 89.90981318343057, 13.591486734537472], [13.535412370207581, 28.775066455110952, 8.517758343089803], [15.091843257893572, 22.038114674216967, 5.274666713789493], [4.533922914085986, 9.246593716781055, 0.7457561053817718]),
				SensorReading(417792864043, [28.113215051318132, 3.5902089669524777, 27.089965597375468], [351.4953931258853, 276.449130138319, 414.6381166837604], [2.9392559484444636, 3.4409808962929334, 20.845121118713795], [23.444114846861073, 20.54238178198393, 19.603053356870134], [11.108035936469573, 2.6733737186334636, 3.2392262486516223], [9.664165851691068, 4.924408300006856, 1.3357489173523185]),
				SensorReading(417792864159, [23.9283489288754, 8.255795231924957, 29.980047682233792], [40.75554612076149, 244.20446713744397, 243.46548545415192], [28.76630863191202, 18.10432720938494, 39.358040093581955], [24.808950445638526, 9.18992307122646, 10.481362495193196], [14.171078677398153, 1.403060441499644, 28.35827206939082], [2.542565913872934, 6.124813411306562, 0.23991249009019833]),
				SensorReading(417792864401, [17.856141785850035, 17.223027643383112, 14.732911145722728], [425.2066485472824, 423.43237147381564, 399.27432047693344], [94.71179243167136, 64.89846415077515, 38.40227020514659], [23.10381823152908, 25.73606673572815, 6.425691013464633], [21.004105210781802, 19.118099542002458, 6.280554178288487], [7.886075310687437, 9.24679350980993, 2.309947501332487]),
				SensorReading(417792864611, [3.617946990618446, 15.164383790564699, 20.984802799924278], [261.29488089481424, 468.6375579371022, 226.9242080758352], [32.43606506288892, 25.703878943350865, 30.846261298235234], [0.03892143145917615, 27.558913465043638, 3.491372655461536], [17.375992010476867, 9.589994441814493, 27.91297521272312], [1.6901454895590073, 8.98938997974479, 4.845454317650492]),
				SensorReading(417792864795, [10.886168415751005, 22.250234272895764, 27.793369147771216], [82.22442920093592, 155.83602843196348, 409.8370425789556], [41.33186293359338, 89.31266136290382, 80.31785763996955], [21.593472076405522, 14.10501695151435, 3.6969343472885043], [3.936415339860144, 0.9181746947501921, 8.703057674046075], [2.929690011934473, 7.436683003633549, 3.8514353160567296])
        ]
        readings_2 = [
				SensorReading(1492102223004, [9.943733311130025, 17.063657904949554, 12.36319282110945], [350.39931773587347, 30.27866664597606, 169.7393091326632], [3.2446249212169764, 26.043250867202172, 96.77159821182505], [20.7316722943315, 29.968721653456367, 27.83058065087427], [27.220660771995632, 3.436518140148557, 13.801891230505095], [6.0854395009023, 5.00175800939595, 6.135198047212072]),
				SensorReading(1492102223251, [9.128456066462267, 9.767220380385538, 16.749850793967745], [491.4360906368636, 210.76300892381934, 356.5855469411971], [22.844800588210845, 6.917234398812255, 31.05473906846532], [17.762801575398946, 31.550189227739235, 25.548458381613933], [29.494243046042236, 15.942627585178297, 3.830222682497812], [0.772057333977918, 6.185587301574533, 4.291210407448379]),
				SensorReading(1492102223412, [29.967600853572996, 19.867864161211514, 10.707261099389655], [48.232791042809644, 141.69169586901887, 473.6949964404572], [37.44492536847436, 75.24920176190251, 6.577794388000857], [16.8552226519565, 20.5293391380065, 13.967123011940288], [10.967480038810763, 24.36979348080332, 5.394833209954729], [5.888532587763542, 0.5040909917906, 7.247410988847058]),
				SensorReading(1492102223576, [4.806695640636654, 23.770441871970835, 18.91140464942711], [6.421065266064785, 10.62406020551565, 31.565364441116184], [76.92559149103603, 6.272263982727832, 72.6217582308222], [5.823394935277747, 20.706295133286947, 12.503925703299608], [30.68591418325754, 9.975693080453453, 7.5118559098675455], [7.97388718402948, 0.2281974183375013, 9.034145409488463]),
				SensorReading(1492102223718, [8.902150640558457, 17.21937582549536, 17.238458956230808], [237.31604015211184, 415.7652229333256, 245.61812250911825], [25.24330316608233, 66.02124175362827, 19.43760392819143], [17.110803161332782, 17.60767139790204, 14.023984279671414], [17.61605821828313, 4.079413694706702, 11.128165092836387], [6.3054349603135496, 6.909713764620367, 5.736357953068632]),
				SensorReading(1492102223894, [23.699649075465803, 29.733545165875487, 16.480017339822687], [396.26980567019416, 54.12895547702795, 279.54486701514764], [37.49187529173918, 6.33162368508674, 97.85600853639075], [22.081702105036655, 31.75153950464546, 26.332968412954408], [8.773362407050953, 18.088885153908812, 10.912690878369009], [7.464354480363388, 8.90381519534229, 7.071915199401343]),
				SensorReading(1492102224040, [27.057585496010184, 0.40684451226450236, 14.471416667650356], [447.941877361278, 340.74957705547644, 176.99814577428924], [66.69769181076711, 57.534882772452114, 40.37608792428791], [3.482216903680424, 14.28939191038079, 27.902678280231306], [5.283526997820857, 12.274807634123004, 29.697863330553794], [6.621252192230629, 4.380439200703558, 6.1701549955224095]),
				SensorReading(1492102224282, [16.483836215471328, 10.825626332848735, 2.524747251640676], [51.74937964525761, 202.93033636702478, 376.9984865360814], [52.20694658427972, 49.6378476937745, 31.143973316763727], [15.398015134637884, 13.676529824184922, 29.958229383112453], [19.824798925593896, 25.640482852934305, 6.7188750651770555], [2.4552047172596145, 0.5260613508983514, 6.29205906819915]),
				SensorReading(1492102224434, [4.850554096502549, 7.935454039362927, 14.70228094715555], [450.67061080572705, 255.61991522502186, 487.00238158579134], [47.23275130663659, 6.398371999638075, 52.31961392007898], [14.601772037059654, 26.596754768638505, 22.017323850889245], [15.569909537337264, 19.71690642546066, 5.9781875731809855], [9.136623327019485, 7.162399009975023, 2.4979903528787673]),
				SensorReading(1492102224563, [18.778805700060822, 7.26284417449698, 1.0064153485676641], [6.979994960699787, 366.240877272925, 401.75243952729045], [57.39850562695027, 59.78891904254845, 18.63148804742628], [20.685038216744807, 17.33798322663798, 6.97780335057157], [23.067850654260923, 22.56548955281238, 18.238100265436398], [5.455539025788529, 9.114294157394188, 8.948630798936575]),
				SensorReading(1492102224749, [6.851694857679355, 3.1069164095955166, 28.272678304450718], [359.9465689745854, 174.62605026042323, 200.30469076324653], [13.765131549473363, 3.8804364949709735, 38.1481463350722], [27.700141718833297, 24.32788443450199, 30.14570628657774], [22.07679270658955, 7.157802649640665, 8.396697870667015], [2.3137671358576894, 1.0798053113028727, 6.946717841464754]),
				SensorReading(1492102224908, [19.058516509931557, 2.5509371592057093, 10.683669595225918], [24.755557571556842, 330.5563674197506, 234.5851167932413], [5.33924096503412, 69.3930342210699, 6.878591354294372], [22.26759048721218, 4.43480836498426, 30.74021477775299], [23.682662468254, 23.67648932230066, 4.800012009059188], [7.487852108301681, 7.83324889149284, 8.104235827569497]),
				SensorReading(1492102225091, [5.667919276959584, 2.7329472950113285, 19.33461899427453], [161.0655478850448, 67.60795226301313, 96.15177440249207], [75.647165717541, 10.961332269771184, 52.336062887874945], [0.6587957709513326, 24.95457147792728, 20.009536996074146], [9.077775090516209, 3.466717281746483, 8.817631232448381], [8.822681489723394, 1.5507159652615987, 4.25415837698808]),
				SensorReading(1492102225329, [17.274066884956575, 18.13382956735538, 26.115913175696612], [379.2984618080442, 255.96459780397868, 481.10717686634035], [78.60221640381883, 96.16221172824024, 50.525833029364954], [17.30129661728079, 23.486180998477753, 17.952016776783704], [18.599871080179312, 7.292483739605981, 24.720514814214592], [4.609058165897962, 2.21225433541734, 2.3464087445576673]),
				SensorReading(1492102225525, [3.836925328356841, 6.924280797105389, 24.439595628694043], [26.81833845395831, 274.156133033676, 13.668318917409605], [51.80980718424693, 54.63494541735461, 97.98347448021008], [16.850167552018657, 19.150737329197025, 29.970751520313446], [20.64073543450383, 20.667021544681713, 17.325628013296356], [3.5837136294293783, 5.826614412829927, 3.483164033953685]),
				SensorReading(1492102225628, [21.696325968034706, 29.93997935319068, 19.616618844996584], [81.60946910611955, 5.426608107033659, 226.83141902389693], [5.747430672096742, 16.226411115823325, 42.89501230836217], [14.481003425312238, 30.77937888554312, 30.72033505235567], [10.78440945777302, 31.7426094447246, 31.024917800945016], [2.5759388841750996, 1.0174330256519415, 5.109743123771276]),
				SensorReading(1492102225753, [28.723109011115316, 24.4006493582898, 23.130907580723445], [84.56406430979713, 434.54724789079046, 470.76076646521756], [36.29324416262503, 79.03195013149087, 99.4710478213423], [31.208388591202027, 7.118884011510232, 14.438689604505875], [6.5170862032351735, 3.702749724065157, 20.42819201294693], [4.041884365610676, 5.341219719157742, 8.79623222855582]),
				SensorReading(1492102225919, [10.356016015600463, 2.9981875431322926, 6.191438751060183], [122.92100090499613, 443.6591512179724, 132.21301758778642], [36.68142578082683, 9.226606665586834, 32.04568301091616], [10.129244981091183, 21.642912729065678, 1.8403310797364973], [15.283402408752178, 14.059077313117587, 27.674846217384896], [5.469994864474211, 2.78188882916076, 5.69086286181957]),
				SensorReading(1492102226042, [27.439865663507923, 20.374293940477397, 21.320346998179563], [232.83346852075044, 332.5142967450094, 27.605348918297025], [41.2093107381343, 16.674160197006195, 3.3569101091256104], [28.661798621225174, 8.37715077710089, 7.102322023315452], [13.049864109048098, 7.712324117603487, 30.96923535111146], [9.184291728697506, 5.612837911371847, 5.895174097316552]),
				SensorReading(1492102226220, [20.379491896098724, 28.596513694585155, 21.140346317314126], [404.4989827686636, 352.2218841677183, 357.6300244014007], [44.437795584276586, 54.018562231003564, 94.72007347091046], [10.287352884154352, 31.51986818692083, 17.635218665516373], [19.780509336503176, 7.490167689487343, 4.667423935089733], [2.6964243008569397, 8.811747613352372, 2.067555600832345]),
				SensorReading(1492102226421, [22.304909931654205, 6.328685289826968, 5.4022736484543294], [227.65479256752326, 281.96954676966266, 194.3383873050638], [36.49009339381688, 32.70508219982736, 22.02093702497494], [8.94808385135834, 2.2931974024939734, 6.489152518115162], [9.279960566703881, 15.530745685217472, 6.947228036426516], [7.359632231725243, 1.6623371453541114, 2.2578592964483626]),
				SensorReading(1492102226529, [1.4702785260902012, 17.021698013949663, 8.152206449224831], [461.89800071560865, 467.0395598904539, 105.81271016227505], [16.50165520599234, 51.92277882981002, 43.83945504912127], [20.41274659625171, 22.49284409501986, 30.22013514341965], [30.403161543974242, 19.688750131355878, 3.6607397219317086], [1.8513380136355528, 6.962912005828449, 7.95543701832366]),
				SensorReading(1492102226744, [23.930347339076203, 4.5820013431610676, 5.4456044963602785], [44.47202065182931, 46.58979979200512, 304.5109858188406], [41.3643050615862, 19.366009474693435, 61.905157067629204], [9.781264419938577, 12.300052216841113, 31.87578213574469], [23.288538505867454, 14.813892922278388, 24.483958252425012], [0.4120458999334464, 9.897502304741225, 7.772658519905225]),
				SensorReading(1492102226855, [25.57176469271598, 16.23178124164984, 26.925749834460937], [276.30448746391494, 149.80302635963062, 260.3278219395402], [83.10828975025565, 39.9039249229448, 45.760100304302], [30.557045273641513, 12.184939610235688, 13.177465145593509], [27.40179939741413, 4.2123626611202205, 23.808486520236432], [2.6157820178067883, 0.7944890097258184, 2.894799337555214]),
				SensorReading(1492102227026, [15.680710114286828, 15.83202368291693, 14.473573185422993], [84.93282053846491, 381.2639501029515, 430.77927022254585], [52.79284556564079, 35.070732009395925, 42.021266483765565], [4.24152436658655, 29.636966297992718, 10.03655080272911], [8.188424776553667, 23.967967146255752, 4.1346697083000485], [8.201278279106095, 3.657418685168272, 9.948549269712355])
		]
        readings_3 = [
				SensorReading(195896011789, [15.17456434313241, 24.58306506916047, 28.634213570239908], [236.00298226132622, 179.0908835132535, 272.7869472109269], [54.40711063846211, 15.069616625471859, 85.87232464548218], [20.395290098544837, 13.342072623609738, 28.494986290913623], [19.347395241627964, 13.851757343942758, 12.186406242511698], [3.191528071422305, 5.805531803912266, 4.728377640438569]),
				SensorReading(195896011999, [1.0390927839200401, 20.271971366592656, 12.53258056858115], [31.717472779999255, 297.98687204339745, 28.1662402163777], [60.879835309531835, 20.123051305167785, 21.294211104317007], [19.679147109293485, 31.67873738208739, 24.393551198715052], [19.057862004304695, 31.910163871652244, 22.129216728698008], [6.817883352348452, 6.355669896916577, 1.7716796739877128]),
				SensorReading(195896012223, [24.93268318689841, 16.16501598005775, 8.223767958852704], [307.11773934513064, 173.4831925687131, 91.91971783314918], [8.99280441835122, 54.93301711829578, 89.58106633139849], [17.648313391176956, 14.057087013768086, 9.952641239760151], [23.770807795641176, 29.7872788699408, 8.536063947278436], [1.985433389828839, 2.683693410906879, 8.484360758724929]),
				SensorReading(195896012337, [23.889097809366326, 26.751586411714058, 3.051803152479991], [187.0358811604746, 313.70098301519204, 494.04977645998736], [12.80985303745904, 27.26420100975988, 85.48359522472666], [23.7523425332857, 7.1544307863188585, 31.19199636910333], [29.338442866632327, 21.142593264160762, 19.92954024989378], [3.411838125710893, 1.5477727363089477, 4.981291563676953]),
				SensorReading(195896012453, [0.1686318500618036, 7.895603060481843, 10.976163594864886], [243.74480477989275, 47.117244128129286, 184.46121825547013], [49.381496876338225, 28.97617924586976, 53.147262812808016], [31.816197273574105, 16.606686735759812, 16.031255505542564], [26.558839680507457, 17.18098296908084, 12.40422387780869], [7.051986816560996, 2.1328822785879495, 3.4182339451889776]),
				SensorReading(195896012658, [15.524373538801989, 27.90526336926917, 29.70337865582111], [367.56613396476, 400.09031677000894, 375.3276848782829], [63.647033409553366, 93.1841565480775, 18.213020801418654], [0.7338092136320249, 17.930843297223085, 31.47568823292357], [7.917591585736204, 4.482135494243298, 31.52850893663806], [6.453912037707166, 2.1857969006964275, 3.22779133190088]),
				SensorReading(195896012800, [23.400009159690228, 1.47294250260682, 19.200201062804595], [161.82526270118535, 369.5960541963024, 471.27189341577895], [90.21390423971168, 28.829883564658655, 79.56490680015914], [13.174358055292831, 18.56232850230191, 12.370316463418458], [11.73482989623054, 19.734725891238003, 20.905609238479407], [5.763776981190731, 9.250312948996148, 5.82974209849432]),
				SensorReading(195896013019, [4.3947424862107205, 21.011525019873467, 16.27436282759274], [378.9478516815875, 287.73587994856166, 359.7031216719185], [55.80953304344503, 78.16539332290465, 45.38334463206812], [4.039544731613802, 10.379974066702975, 5.867077123662199], [23.516113712890505, 10.04420278751639, 2.5246676011878932], [6.192345494647284, 3.961463361324822, 2.127050072613743]),
				SensorReading(195896013192, [20.529455350725176, 26.37995209704881, 23.22929138877188], [306.8140058275412, 232.63115820785157, 368.46269576252377], [58.183494060085714, 39.72198823513513, 96.41867000290122], [20.934686875095526, 0.3593631487038209, 26.871438672137224], [30.098879363668903, 28.808705593785284, 29.573599819238414], [7.9372199291397365, 2.3438088531867587, 3.8052438608159367]),
				SensorReading(195896013346, [14.945120344126138, 28.130913089426436, 1.3724662866235846], [439.83620222477583, 118.5842078110107, 473.49063738509847], [14.77785967421572, 56.70201840265744, 17.24964274901093], [18.247466952558327, 15.86285720486243, 1.2946406097666703], [26.29557852697059, 21.626772569193136, 3.177417646995952], [0.4027943916574894, 8.859688639657788, 4.019468287390733]),
				SensorReading(195896013505, [28.245095610935728, 6.773863968046381, 20.675187462773227], [2.5607815729177807, 377.6830793769828, 215.42505765141294], [70.3957091943633, 22.60495534520286, 77.53260804211045], [6.411778082615246, 27.898749078506473, 12.200760939072143], [0.5255707120750621, 27.3845651829129, 11.58669857795035], [1.523904128398409, 5.729935934597778, 0.21172175805118987]),
				SensorReading(195896013735, [28.883294030300828, 14.511161324948155, 6.937027553402441], [139.4428570892195, 319.0264869354685, 137.80326691416772], [36.87527179759642, 37.098492675784314, 54.386369642017364], [30.59049144416367, 28.3716433546586, 15.815134010002442], [22.210666254174996, 12.917467674339544, 10.710143011688924], [0.08104437475127901, 6.31497139157047, 8.173408955861047]),
				SensorReading(195896013865, [13.518570845306616, 4.155584632180659, 11.650329191598082], [106.66855626972178, 275.3429111697376, 149.44301401894555], [50.966205782132754, 43.30092320563212, 91.7539591042033], [5.869587587292262, 26.744604138764366, 29.285318405757252], [22.544712944990525, 15.13658610331601, 12.978699648313402], [5.812057079126596, 5.235265690562492, 5.589402914531072]),
				SensorReading(195896014020, [25.73679538784826, 11.800598223358197, 2.7830418359105984], [422.70345587309674, 271.20255342856325, 171.50606157544945], [81.76020547928276, 53.01186966706665, 59.31701152764804], [8.92315893162193, 5.959510678711236, 23.05731836046801], [31.415377365931768, 26.61528750567687, 0.6253610935763376], [0.02231242192798577, 2.0530151441942035, 4.429086864783223]),
				SensorReading(195896014222, [15.095929998461006, 3.8879335550421246, 20.088197171203912], [124.29258162115676, 241.45928991472658, 322.12534526502077], [12.392981424805004, 68.75744357070008, 15.440230977903113], [29.17957456032731, 24.38819428558542, 8.442144615538982], [29.678414224057892, 28.771144312449593, 30.04421854077247], [5.245599455232641, 3.710495806868269, 7.884379177961042]),
				SensorReading(195896014352, [8.658104629458116, 9.144354196638744, 9.600416709134272], [44.6197371806773, 84.41288962367233, 219.34067407698032], [85.6122306916479, 91.85684507984357, 1.8968862400305708], [1.1885272640848967, 15.36405379317565, 10.440877936233136], [24.351372633812343, 8.205389136702848, 18.91305797202259], [5.108358228912272, 6.120010121329555, 7.8188149095419055]),
				SensorReading(195896014483, [15.469313281766336, 10.93527257848875, 4.3584736750015765], [288.35805715341274, 243.9883626370144, 134.85296000475938], [29.28328576662547, 47.05530027411078, 25.71635772867439], [2.868930991478315, 25.06705168374148, 8.424148750996075], [16.71830331510805, 14.260204024347644, 9.791310573156586], [2.1263949581142527, 1.2787755240238652, 6.59835367754045]),
				SensorReading(195896014624, [30.935068217290674, 14.742941685110175, 30.43037735650153], [470.882142908497, 28.196307663521992, 197.39319568709286], [11.914914826275114, 35.55493122722538, 62.764422196603896], [19.369669906673764, 13.73440942515768, 0.244340629275829], [20.271252987401926, 26.73240857728002, 14.049131516625845], [3.7442255735971317, 8.974724330450826, 8.927152085714697]),
				SensorReading(195896014785, [26.205636337862554, 14.040922767885977, 27.237363597384213], [49.97525027081262, 153.06999791635963, 127.08979633790563], [10.978712508326128, 25.38887048371844, 33.048265530293584], [28.63250918787078, 0.14680835655206081, 30.1543902313898], [5.410930908614009, 22.35899611820168, 18.983540493697177], [9.63394832422955, 5.253493937318378, 3.0194669056043266]),
				SensorReading(195896014896, [27.27995686761592, 2.3248508109040564, 27.423852190819932], [71.04238128107743, 285.40389846276753, 177.30954261609705], [14.174994128187846, 61.54753143498862, 28.539945216169016], [16.638391170755074, 13.961167367222451, 28.413136837413838], [1.1601143847695248, 28.275738477193467, 10.70297869188619], [2.309035605787942, 9.698382577628594, 0.5271328161884126]),
				SensorReading(195896015116, [24.36019619566202, 27.601751347663285, 3.218165133778392], [385.996506865853, 20.926361789377566, 173.77566409298933], [56.0250478958176, 32.14760322331185, 59.140289679784274], [24.244681593436095, 28.49818420902748, 17.001845600716145], [27.134571715609216, 30.932689115501805, 2.6459018061690145], [9.209725635407471, 2.035434626994761, 8.880230824470868]),
				SensorReading(195896015254, [24.07320733265604, 2.282690408039631, 5.296764646165336], [165.574823862419, 20.656446843877575, 186.3379330432076], [85.58857539492392, 21.70773671629461, 62.41823428980564], [9.924362666705292, 3.177646727270435, 11.583297197908156], [10.911871950641608, 14.148364141377638, 12.632094295034122], [5.038068155557374, 1.228012872092149, 7.462977496955549]),
				SensorReading(195896015399, [23.44809470060484, 18.234633499667012, 17.172523971682793], [40.03457250795323, 468.84432607369143, 228.13691303087646], [68.69666750916494, 79.66310170335859, 78.81873754156366], [7.008223007326819, 21.797493288175193, 10.304941245033987], [24.731774562968432, 20.49971044120461, 11.528401763102458], [9.63792298020149, 5.9395789814488165, 3.7851615817082496]),
				SensorReading(195896015641, [2.112631934180495, 11.999088959187642, 25.011707783490326], [113.52790109661932, 318.60900475391236, 221.79586091425767], [26.817453474682885, 3.819858794104569, 5.65915649952442], [25.9702740235598, 12.4526498069398, 16.659746011585625], [0.1911062531268648, 3.267674452768727, 11.569483028384411], [5.273542052316803, 9.99922528852574, 5.653642182741252]),
				SensorReading(195896015867, [8.613752543825598, 28.187010710290593, 30.418122826560833], [46.5224847137341, 153.62582849087687, 447.9085011384381], [12.119681529891723, 99.67558529481371, 31.809474394190286], [29.25750458304851, 25.724819693185328, 9.044076591253766], [26.908384455885916, 9.598040563917351, 11.662175681599354], [9.680360004208993, 6.337293485801114, 4.385478175427483]),
				SensorReading(195896016104, [16.100432473285185, 16.416720280603688, 5.8992285773196755], [19.130597310936913, 6.221748121691073, 111.34223891763223], [41.392254337633574, 44.11363864628592, 30.207072829467265], [21.01190926189193, 18.915975654146933, 23.59085252527894], [19.366432922440872, 9.377521526484195, 16.84135081893673], [7.380541546373375, 9.62628036194892, 9.677622963239415]),
				SensorReading(195896016237, [24.569516206530242, 17.598717883959768, 29.927872539168543], [331.39500967601344, 273.1869756446184, 2.509050209513086], [18.93666830906526, 45.83848319602372, 90.01839618175633], [29.52525192961639, 8.024959851096352, 23.738436318412198], [30.62893485049698, 12.99342470248395, 18.385038559948153], [0.8679042009309323, 6.475646694944884, 2.1460332924177083]),
				SensorReading(195896016386, [3.5553379055407994, 16.35608940176344, 0.2587753242137083], [426.6775272999052, 417.4375896275594, 94.1270094240793], [10.552967960442682, 44.2785680953593, 18.54826683258538], [26.639410734303347, 6.5075301540110395, 18.254159533948815], [1.0472207558361077, 16.94740700451544, 13.494099723517756], [2.1746623591216108, 9.322189218328353, 9.990003669570989]),
				SensorReading(195896016551, [5.471094642736958, 1.524647859054511, 9.71492403983364], [99.38152272241402, 397.519390540138, 34.38478474445289], [88.7508572811544, 11.775249533393438, 67.79541492790369], [10.39420099740969, 21.50265073840836, 11.654398306780102], [30.248728098860994, 25.078622833121795, 8.816317363198696], [1.831595240161833, 1.8689275521027504, 5.407232809066164]),
				SensorReading(195896016787, [1.8797171057745636, 20.734019705340586, 3.250450979762398], [228.97824222604297, 55.61102179549754, 148.2578804773659], [30.901144476915366, 73.86298872486462, 2.734856778642558], [12.062141091763142, 10.033603997654925, 30.270290385581777], [6.804161966229, 8.17884125165078, 31.884052350746828], [5.101031441536844, 3.546336440900455, 2.872154765593894]),
				SensorReading(195896016956, [9.09065733721318, 14.186762663456271, 13.243295476903725], [126.44584814512515, 497.50460339590643, 211.0147286260493], [6.796395086685347, 68.4752323460967, 55.002555143857876], [7.644566648466803, 27.861840866834065, 13.875554087312363], [24.105892510987317, 29.870597623524986, 30.23932905552778], [5.345903396104296, 7.688066055649431, 5.725553242713948]),
				SensorReading(195896017164, [5.271533869673593, 23.245510877893054, 3.628276447454745], [90.2736412302837, 395.25794113028496, 328.9565387601255], [21.8553769062367, 6.38517749756028, 50.797286283831255], [10.78819723438798, 19.338982236410384, 1.0031803188470363], [28.996759632301227, 28.710766649527844, 13.981609014291106], [9.586524039690973, 8.47643709636769, 0.34910818725612747]),
				SensorReading(195896017305, [8.351514298997138, 3.9529887616156074, 17.924836755814646], [181.88051515971338, 267.2901932812948, 260.3370045902347], [48.384146288143356, 60.187373379614954, 67.34006373724448], [26.90431323353438, 17.009022636090478, 30.33833840952699], [4.271075744722992, 31.314432423889023, 23.088008002421674], [6.965466270515223, 4.342011647198025, 0.5076277022529041]),
				SensorReading(195896017543, [26.710750668347075, 10.998579498984245, 8.517644618996108], [262.4297481706389, 234.82162978702897, 353.2578037994093], [30.47774072899604, 99.02020423155544, 27.216271750054155], [17.675171682353632, 28.561872174680975, 25.584719301574562], [27.766412762953678, 16.363213450022474, 13.442132215636377], [9.69436406066787, 2.882686128301576, 1.3707700764048336]),
				SensorReading(195896017756, [16.08716548509411, 25.97230841443131, 21.431447135919573], [203.4077660931139, 176.81207038151192, 130.6462327998769], [82.86410795267678, 78.98981937909475, 70.28693900485274], [17.93116747688111, 16.843389765630036, 6.350300366950947], [22.587151495612826, 16.987245055870087, 7.875334253716403], [5.860668464919101, 9.861437960836692, 4.76184147962396]),
				SensorReading(195896017901, [4.252417636431318, 7.799649773496224, 10.498579345114024], [177.3454541031449, 267.58518026327795, 25.029582055738906], [5.94211292586203, 15.578605277265368, 88.4334294484661], [27.47625750654358, 27.680481936610633, 22.86037858890161], [5.062516576404526, 7.998198715088922, 9.809687663634293], [9.829857925885166, 5.045357094428599, 3.010194923818111]),
				SensorReading(195896018094, [2.064309461794025, 11.26826370568389, 28.30312033026296], [183.70932397982642, 385.2041294056356, 141.47678246902257], [28.668144754182745, 24.99437051191996, 99.83009531477374], [18.379020325162376, 3.3880623573407824, 6.770720291327354], [15.222312423803999, 12.955612565939106, 7.256072040669757], [6.707916063757436, 1.1825731286092933, 5.665617930855137]),
				SensorReading(195896018270, [25.44681933362431, 11.895628901175225, 30.384929427210547], [33.1030002919202, 120.53624949714676, 403.37043434197875], [61.957318128278985, 83.18078742812922, 47.17964257001419], [23.563812928844705, 25.126511384938837, 22.05776931658857], [21.92277956195674, 0.4172668857844464, 9.339431257792544], [3.035321206258649, 5.0017335440716035, 9.231411153233598]),
				SensorReading(195896018380, [8.856563120793247, 4.0390366134076245, 23.90179861038494], [17.736994374408678, 239.51807156481675, 234.38393030019444], [69.3419681251592, 96.80111354928378, 31.106964302400453], [14.037305225802463, 5.237391432313519, 2.577642658787603], [9.029826561953318, 2.380250070781333, 29.5022732190219], [4.571840965643012, 2.79706643382566, 9.395009317859905]),
				SensorReading(195896018582, [16.9983481553509, 7.740557372803632, 10.897154163451734], [470.63008398737026, 144.55274205590212, 331.9821087999968], [27.9604956260583, 78.20539157395208, 18.529330827743152], [31.835797486251185, 8.668901750824507, 23.186368223329566], [26.165871977555206, 27.594684041258073, 15.913107098283987], [5.305892123295264, 1.3401822875744396, 0.8636081357842806]),
				SensorReading(195896018705, [1.6607954239658227, 13.276195341750178, 12.479099283549306], [86.67829658513187, 167.3704805903925, 146.40061225452806], [23.71519843208414, 88.47203830249516, 52.7294973005784], [23.44775137066381, 14.647312497722933, 1.9596181843294573], [21.51330826846353, 8.696326584686407, 27.738210329609966], [4.037663545787779, 8.985313104773878, 6.661337307077303]),
				SensorReading(195896018833, [31.590514135345675, 20.25491758952856, 4.020776447342929], [477.12913900850015, 195.4448060000284, 175.25069980556], [58.04642847068029, 35.322578065554076, 16.36551216502513], [3.542324784824455, 21.055824295930492, 30.40960042301333], [10.489661285159446, 13.198239716417135, 4.7121851880989745], [6.674262599855924, 0.4084698684845889, 4.6056378559663225]),
				SensorReading(195896019036, [28.06606570707406, 8.340496191639563, 1.252395722817596], [268.5336315798138, 291.9104153655839, 493.2377857017108], [33.27490811557128, 23.57041351112146, 25.607016487071], [17.806659232975527, 3.8595016526415122, 24.38393490036305], [8.937414951397027, 15.841634529292055, 29.876476494991188], [6.931853120398702, 7.5095372336928055, 7.441617157330821]),
				SensorReading(195896019276, [3.7035954083368487, 1.3201739612002363, 8.353859652106031], [6.899067021618521, 151.21774043290475, 355.85241030479233], [55.004239717270345, 89.07716116981828, 18.365488151041998], [22.348378621548147, 4.513421785864619, 20.105504944441407], [28.04220314806691, 18.479500972881308, 9.725843801661505], [5.997164146580632, 3.216781546158388, 2.188202890639641]),
				SensorReading(195896019435, [9.280734570636909, 23.709709128952444, 29.52769969562785], [76.42379468174981, 306.80399739117354, 2.9240736949142088], [13.745118214436413, 55.20336441561332, 46.443977599623096], [3.019060662461861, 11.3461704864188, 13.317127224352657], [13.991273792724321, 24.19841693522605, 7.53539835177806], [4.990620380215097, 8.35950507270258, 6.345010250361337]),
				SensorReading(195896019593, [15.067401196611367, 2.169845780574562, 12.262072152231323], [8.719271996896206, 439.5111506394897, 208.40707136062048], [86.7025600313176, 14.570000005263362, 73.12813937245328], [10.040419454119444, 8.504096549022158, 31.61147576653376], [16.784403300473137, 8.259191422973451, 23.034512944017216], [2.8937984392968605, 0.017105167355923045, 0.5277062473451133]),
				SensorReading(195896019816, [28.969829701286205, 0.3172393132124043, 24.031135830169834], [3.0285723531924824, 385.8885171301561, 146.97587702805038], [72.44076247615662, 79.15961964400665, 75.68090432873903], [6.690695522774668, 15.782794982331538, 22.205462147931673], [15.950194115143379, 26.063047138182874, 29.31789262374456], [6.609510198845342, 1.3035455770662208, 2.608049557657578]),
				SensorReading(195896019991, [18.506568125241607, 11.66555300502877, 31.02526970404501], [391.0115430492952, 194.57172427515206, 68.85453447518076], [41.819453599017876, 34.72385550824251, 19.811648000538895], [2.115676712039143, 25.751131950594242, 1.8410698748646759], [31.4534427810795, 27.069526702606787, 2.9517526159608387], [9.055757539491388, 1.472941040772241, 0.2677828984984576]),
				SensorReading(195896020206, [1.842834094195375, 23.842442937190086, 26.730996108884188], [309.64517963837324, 251.5556559451882, 228.76792673264174], [71.53677948945104, 81.86484007867492, 43.15466693485321], [26.95775554747265, 8.050365591539386, 8.103368184545765], [18.07508169172144, 8.856929074344787, 14.930339942783231], [5.996796209635823, 8.618926428463839, 6.695439995496542]),
				SensorReading(195896020405, [25.833393515666017, 5.204287149252334, 26.912393286484498], [61.43285420954159, 481.14579980096823, 209.2366556829105], [62.12159880823081, 87.77106424816738, 32.67968295862256], [17.802575846726892, 6.604360189409533, 13.281377760099897], [10.812229410576343, 8.451635559135632, 23.26890539114236], [0.5708611861339397, 9.072004320846801, 8.859870420742084])
		]

        self._readings_test_data = [
            readings_1,
            readings_2,
            readings_3
        ]

        self._empty_file = "data/empty.bin"
        self._eight_zeros_file = "data/eight_zeros.bin"
        self._eight_zeros_in_the_middle_file = "data/eight_zeros_in_the_middle.bin"
        self._no_eight_zeros_file = "data/no_eight_zeros.bin"
        self._incorrect_formating = "data/incorrect_formatting.bin"

    def tearDown(self):
        clear_dir("data/tmp")

    def tmpFilename(self) -> str:
        return "data/tmp/%d" % datetime.timestamp(datetime.now())
    
    def relativeFilename(self, filename: str) -> str:
        return 

    def test_binaryFile_ifWellFormated_isParsedAndSaved_correctly(self):
        with open("data/sensor_config.json") as file:
            parser = SensorParser(file)

        for i in range(3):
            with self.subTest(i=i):
                filename = self._files_test_data[i]
                with open(filename, 'rb') as file:
                    content = file.read()
                with open(filename, 'rb') as file:
                    readings = parser.parseFile(file)
                tmp_filename = self.tmpFileName()
                with open(tmp_filename, "wb") as file:
                    parser.writeFile(readings, file)
                with open(tmp_filename, "rb") as file:
                    self.assertEqual(content, file.read())

    def test_binaryData_ifWellFormated_isParsedAndRetrieved_correctly(self):
        with open("data/sensor_config.json") as file:
            parser = SensorParser(file)
        
        for i in range(3):
            with self.subTest(i=i):
                (filename, result) = self._files_test_data[i]
                with open(filename, 'rb') as file:
                    content = file.read()
                
                readings = parser.parseData(content)
                retrieved = parser.toBinary(readings)
                self.assertEqual(content, retrieved)

    def test_listOfSensorReadings_isSavedToFileAndRead_correctly(self):
        with open("data/sensor_config.json") as file:
            parser = SensorParser(file)
        
        for i in range(3):
            with self.subTest(i=i):
                tmp_filename = self.tmpFilename()
                readings = self._readings_test_data[i]
                with open(tmp_filename, 'wb') as file:
                    parser.writeFile(readings, file)
                with open(tmp_filename, 'rb') as file:
                    readings_read = parser.parseFile(file)
                for (it1, it2) in zip(readings, readings_read):
                    self.assertTrue(it2.almostEqual(it1))

    def test_listOfSensorReadings_isFromattedAndRead_correctly(self):
        with open("data/sensor_config.json") as file:
            parser = SensorParser(file)
        
        for i in range(3):
            with self.subTest(i=i):
                readings = self._readings_test_data[i]
                binary = parser.toBinary(readings)
                readings_read = parser.parseData(binary)
                for (it1, it2) in zip(readings, readings_read):
                    self.assertTrue(it2.almostEqual(it1))
    
    def test_parser_initializedWithEmptyText_throwsValueError(self):
        with self.assertRaises(ValueError):
            parser = SensorParser("")

    def test_parser_readingFileNotInBinaryMode_throwsValueError(self):
        with open("data/sensor_config.json") as file:
            parser = SensorParser(file)
        
        with self.assertRaises(ValueError):
            with open(self._files_test_data[0], "r") as file:
                parser.parseFile()(file)

    def test_parser_readingEmptyFile_throwsValueError(self):
        with open("data/sensor_config.json") as file:
            parser = SensorParser(file)
        
        with self.assertRaises(ValueError):
            with open(self._empty_file, "r") as file:
                parser.parseFile()(file)

    def test_parser_readingFileWithOnlyEightZeros_returnsEmptyList(self):
        with open("data/sensor_config.json") as file:
            parser = SensorParser(file)
        
        with open(self._eight_zeros_file, "r") as file:
            self.assertListEqual(parser.parseFile(file), [])

    def test_parser_readingFileWithEightZerosInTheMiddle_throwsValueError(self):
        with open("data/sensor_config.json") as file:
            parser = SensorParser(file)
        
        with self.assertRaises(ValueError):
            with open(self._eight_zeros_in_the_middle_file, "r") as file:
            	parser.parseFile(file)

    def test_parser_readingFileWithoutEightZeros_throwsValueError(self):
        with open("data/sensor_config.json") as file:
            parser = SensorParser(file)
        
        with self.assertRaises(ValueError):
            with open(self._no_eight_zeros_file, "r") as file:
            	parser.parseFile(file)

    def test_parser_readingFileWithIncorrectFormatting_throwsValueError(self):
        with open("data/sensor_config.json") as file:
            parser = SensorParser(file)
        
        with self.assertRaises(ValueError):
            with open(self._incorrect_formating, "r") as file:
            	parser.parseFile(file)